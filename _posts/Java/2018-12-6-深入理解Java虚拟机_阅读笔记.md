---
layout: post
title: 深入理解Java虚拟机 JVM高级特性与最佳实践 阅读笔记
category: Java
---

# 垃圾收集算法
## 标记-清除算法 Mark-Sweep
![](/images/java/mark_sweap.png)

## 复制算法 Copying
![](/images/java/copy.png)
- Eden: 80%
- Survivor1: 10%
- Survivor2: 10%

## 标记-整理算法 Mark-Compact
![](/images/java/mark_compact.png)

# HotSpot JVM 1.6 垃圾收集器
![](/images/java/hotspot_gc.png)

## Serial 收集器
![](/images/java/serial_serial_old.png)
- 新生代
- 复制算法
- 单线程回收
- Stop The World

## ParNew 收集器
![](/images/java/par_new.png)
- 新生代
- 复制算法
- 并行回收
- Stop The World

## Parallel Scavenge 收集器
- 新生代
- 打到一个可控的吞吐量, 吞吐量=用户代码时间/(用户代码时间 + 垃圾回收时间)

## Serial Old 收集器
![](/images/java/serial_old.png)
- 老生代
- 标记-整理算法
- 单线程回收
- Stop The World

## Parallel Old 收集器
![](/images/java/parallel_old.png)
- 老生代
- 标记-整理算法
- 并行回收
- Stop The World

## CMS 收集器 Concurrent Mark Sweep
![](/images/java/cms.png)
- 老生代
- 最短回收停顿时间
- 标记-清理算法
- 四个阶段
  - 初始标记 CMS initial mark
    - Stop The World
  - 并发标记 CMS concurrent mark
  - 重新标记 CMS remark
    - Stop The World
  - 并发清除 CMS concurrent sweep

## G1收集器
- 精确控制停顿
- 标记-整理算法
- Java堆分成多个大小固定的独立区域，跟踪每个区域垃圾堆积情况，形成一个优先队列，根据允许运行的时间优先回收垃圾最多的区域
